"use strict";$("#regForm").bootstrapValidator({feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名不能为空",validators:{notEmpty:{message:"用户名必填不能为空"},stringLength:{min:6,max:12,message:"用户名长度在6~12位之间"},regexp:{regexp:/^[a-zA-Z0-9_\.]+$/},remote:{url:"../../api/checkuser.php",message:"用户名太受欢迎，请重新输入",delay:1e3,type:"POST"}}},password:{message:"用户名不能为空",validators:{notEmpty:{message:"密码必填不能为空"},stringLength:{min:6,max:18,message:"用户名长度在6~18位之间"},different:{field:"username",message:"用户名和密码不能相同。"}}},checkpwd:{validators:{notEmpty:{message:"不能为空"},identical:{field:"password",message:"两次密码不一致"}}},email:{validators:{notEmpty:{message:"邮箱必填不能为空"},emailAddress:{message:"请输入正确的邮箱格式"}}},phone:{validators:{notEmpty:{message:"手机号码必填不能为空"},regexp:{regexp:/^((1[358][0-9])|(14[57])|(17[0678])|(19[7]))\d{8}$/,message:"请输入正确的手机号码"}}}}}).on("success.form.bv",function(e){e.preventDefault();var a=$(e.target),o=a.serialize();console.log(o);a.data("bootstrapValidator");$.post("../../api/userAdd.php",o,function(e){var a=JSON.parse(e);if(1==a.isStatus){$("#regModalTitle").html("注册成功"),$("#regModalContent").html('<span class="glyphicon glyphicon-ok"></span>'+a.message+"，等待<span id='num1'>5</span>跳转到登录页面");var s=4,n=setInterval(function(){$("#num1").html(s),0==--s&&(clearInterval(n),location.href="../../login.php")},1e3)}else $("#loginModalTitle").html("注册失败"),$("#loginModalContent").html('<span class="glyphicon glyphicon-remove"></span>'+o.message);$("#regModal").modal("show")})}),$("#loginForm").bootstrapValidator({feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{username:{message:"用户名不能为空",validators:{notEmpty:{message:"用户名必填不能为空"},stringLength:{min:6,max:12,message:"用户名长度在6~12位之间"},regexp:{regexp:/^[a-zA-Z0-9_\.]+$/}}},password:{message:"用户名不能为空",validators:{notEmpty:{message:"密码必填不能为空"},stringLength:{min:6,max:18,message:"用户名长度在6~18位之间"},different:{field:"username",message:"用户名和密码不能相同。"}}}}}).on("success.form.bv",function(e){e.preventDefault();var a=$(e.target),s=a.serialize();a.data("bootstrapValidator");$.post("../../api/userlogin.php",s,function(e){var a=JSON.parse(e);if("1"==a.isStatus){$("#loginModalTitle").html("登录成功"),$("#loginModalContent").html('<span class="glyphicon glyphicon-ok"></span>'+a.message+"，等待<span id='num'>5</span>跳转到个人中心");var s=4,n=setInterval(function(){$("#num").html(s),0==--s&&(clearInterval(n),location.href="../../personal.php")},1e3)}else $("#loginModalTitle").html("登录失败"),$("#loginModalContent").html('<span class="glyphicon glyphicon-remove"></span>'+a.message);$("#loginModal").modal("show")})});